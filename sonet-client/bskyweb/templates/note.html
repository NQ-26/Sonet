{% extends "base.html" %}

{% block head_title %}
{%- if noteView -%}
  @{{ noteView.Author.Handle }} on Bluesky
{%- else -%}
  Bluesky
{%- endif -%}
{% endblock %}

{% block html_head_extra -%}
{%- if noteView -%}
  <meta property="og:type" content="article">
  <meta property="profile:username" content="{{ profileView.Handle }}">
  {%- if requestURI %}
  <meta property="og:url" content="{{ requestURI }}">
  {% endif -%}
  {%- if noteView.Author.DisplayName %}
  <meta property="og:title" content="{{ noteView.Author.DisplayName }} (@{{ noteView.Author.Handle }})">
  {% else %}
  <meta property="og:title" content="@{{ noteView.Author.Handle }}">
  {% endif -%}
  {%- if noteText %}
  <meta name="description" content="{{ noteText }}">
  <meta property="og:description" content="{{ noteText }}">
  {% endif -%}
  {%- if imgThumbUrls %}
  {% for imgThumbUrl in imgThumbUrls %}
  <meta property="og:image" content="{{ imgThumbUrl }}">
  {% endfor %}
  <meta name="twitter:card" content="summary_large_image">
  {%- elif noteView.Author.Avatar %}
  {# Don't use avatar image in cards; usually looks bad #}
  <meta name="twitter:card" content="summary">
  {% endif %}
  <meta name="twitter:label1" content="Noteed At">
  <meta name="twitter:value1" content="{{ noteView.IndexedAt }}">
  <meta name="article:published_time" content="{{ noteView.IndexedAt }}">
  <meta name="article:published_time" content="{{ noteView.IndexedAt }}">
  <link rel="alternate" type="application/json+oembed" href="https://embed.bsky.app/oembed?format=json&url={{ noteView.Uri | urlencode }}" />
  <link rel="alternate" href="{{ noteView.Uri }}" />
{% endif -%}
{%- endblock %}

{% block noscript_extra -%}
{%- if noteView -%}
<div id="bsky_note_summary">
  <h3>Note</h3>
  <p id="bsky_display_name">{{ noteView.Author.DisplayName }}</p>
  <p id="bsky_handle">{{ noteView.Author.Handle }}</p>
  <p id="bsky_did">{{ noteView.Author.Did }}</p>
  <p id="bsky_note_text">{{ noteText }}</p>
  <p id="bsky_note_indexedat">{{ noteView.IndexedAt }}</p>
</div>
{% endif -%}
{%- endblock %}
